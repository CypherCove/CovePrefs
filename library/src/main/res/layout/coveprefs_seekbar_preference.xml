<?xml version="1.0" encoding="utf-8"?>
<!--
  ~ Copyright (C) 2015 The Android Open Source Project
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~      http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License
  -->

<!--
  ~ This is a modified and merged derivative version of the v7.preference library's preference_widget_seekbar.xml and
  ~ the v14.preference library's preference_material.xml.
 -->

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              xmlns:tools="http://schemas.android.com/tools"
              android:layout_width="match_parent"
              android:layout_height="wrap_content"
              android:minHeight="?android:attr/listPreferredItemHeightSmall"
              android:gravity="center_vertical"
              android:paddingRight="?android:attr/listPreferredItemPaddingRight"
              android:background="?android:attr/selectableItemBackground"
              android:focusable="true">

    <RelativeLayout
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:clipToPadding="false"
            android:clipChildren="false"
            android:paddingLeft="?android:attr/listPreferredItemPaddingLeft"
            android:paddingTop="16dp"
            android:paddingBottom="0dp"> <!--Leave 16dp left over on bottom so inner views can use the space for SeekBar touch area.-->

        <LinearLayout
                android:id="@+id/coveprefs_icon_frame"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_marginLeft="-4dp"
                android:minWidth="60dp"
                android:gravity="left|center_vertical"
                android:orientation="horizontal"
                android:paddingRight="12dp"
                android:paddingTop="4dp"
                android:paddingBottom="20dp"
                tools:visibility="gone"><!--Picks up the left over 16dp from parent on the bottom.-->

            <com.cyphercove.coveprefs.widgets.PreferenceImageView
                    android:id="@android:id/icon"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:maxWidth="48dp"
                    android:maxHeight="48dp"/>
        </LinearLayout>

        <TextView
                android:id="@android:id/title"
                android:layout_toRightOf="@+id/coveprefs_icon_frame"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:maxLines="1"
                android:textAppearance="@style/CovePrefs.TextAppearance.PreferenceTitle"
                android:ellipsize="marquee"/>

        <TextView
                android:id="@android:id/summary"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@android:id/title"
                android:layout_toRightOf="@+id/coveprefs_icon_frame"
                android:layout_alignLeft="@android:id/title"
                android:textAppearance="?android:attr/textAppearanceSmall"
                android:textColor="?android:attr/textColorSecondary"
                android:maxLines="10"/>

        <!-- Using UnPressableLinearLayout as a workaround to disable the pressed state propagation
        to the children of this container layout. Otherwise, the animated pressed state will also
        play for the thumb in the AbsSeekBar in addition to the preference's ripple background.
        The background of the SeekBar is also set to null to disable the ripple background -->
        <com.cyphercove.coveprefs.widgets.UnPressableLinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_below="@android:id/summary"
                android:layout_alignLeft="@android:id/title"
                android:paddingBottom="16dp"
                android:paddingTop="16dp"
                android:layout_marginTop="-16dp"
                android:clipChildren="false"
                android:clipToPadding="false">
            <!--The top and bottom padding and matching negative margins are to give the SeekBar expanded touch area.-->

            <TextView
                    android:id="@+id/coveprefs_seekbar_left_label"
                    android:layout_width="wrap_content"
                    android:layout_height="match_parent"
                    android:layout_marginRight="22dp"
                    android:gravity="center_vertical"
                    android:fontFamily="sans-serif-condensed"
                    android:maxLines="1"
                    android:textAppearance="?android:attr/textAppearanceSmall"
                    tools:text="Left"
                    tools:visibility="gone"/>

            <SeekBar
                    android:id="@+id/coveprefs_seekbar"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:layout_height="wrap_content"
                    android:paddingLeft="0dp"
                    android:paddingRight="22dp"
                    android:focusable="false"
                    android:clickable="false"
                    android:background="@null"
                    android:paddingTop="16dp"
                    android:layout_marginTop="-16dp"
                    android:paddingBottom="16dp"
                    android:layout_marginBottom="-16dp"/>

            <TextView
                    android:id="@+id/coveprefs_seekbar_right_label"
                    android:layout_width="wrap_content"
                    android:layout_height="match_parent"
                    android:gravity="center_vertical"
                    android:fontFamily="sans-serif-condensed"
                    android:maxLines="1"
                    android:textAppearance="?android:attr/textAppearanceSmall"
                    tools:text="Right"/>

            <TextView
                    android:id="@+id/coveprefs_seekbar_value"
                    android:layout_width="@dimen/coveprefs_seekbar_preference_value_width"
                    android:layout_height="match_parent"
                    android:gravity="right|center_vertical"
                    android:fontFamily="sans-serif-condensed"
                    android:maxLines="1"
                    android:textAppearance="?android:attr/textAppearanceSmall"
                    android:ellipsize="marquee"
                    android:fadingEdge="horizontal"
                    tools:text="100"/>
        </com.cyphercove.coveprefs.widgets.UnPressableLinearLayout>

    </RelativeLayout>

    <!-- Preference should place its actual preference widget here. -->
    <LinearLayout
            android:id="@android:id/widget_frame"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:gravity="end|center_vertical"
            android:paddingLeft="16dp"
            android:orientation="vertical"/>

</LinearLayout>
